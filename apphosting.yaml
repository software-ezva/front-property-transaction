# Settings for Backend (on Cloud Run).
# See https://firebase.google.com/docs/app-hosting/configure#cloud-run
runConfig:
  minInstances: 0
  # maxInstances: 100
  # concurrency: 80
  # cpu: 1
  # memoryMiB: 512

# Environment variables and secrets.
# Environment variables and secrets.
env:
  # Estas variables NO tienen el prefijo NEXT_PUBLIC_ porque deben ser
  # ACCESIBLES SÃ“LO por el servidor Next.js (SSR y API Routes).

  # 1. Backend API URL (Mapeo: BACKEND_API_URL -> BACKEND_API_URL)
  - variable: BACKEND_API_URL
    value: ${{ secrets.BACKEND_API_URL }}
    availability:
      - BUILD
      - RUNTIME

  # 2. Auth0 Domain (Mapeo: AUTH0_DOMAIN -> AUTH0_DOMAIN)
  - variable: AUTH0_DOMAIN
    value: ${{ secrets.AUTH0_DOMAIN }}
    availability:
      - BUILD
      - RUNTIME

  # 3. Auth0 Client ID (Mapeo: AUTH0_CLIENT_ID -> AUTH0_CLIENT_ID)
  - variable: AUTH0_CLIENT_ID
    value: ${{ secrets.AUTH0_CLIENT_ID }}
    availability:
      - BUILD
      - RUNTIME

  # 4. Auth0 Client Secret
  - variable: AUTH0_CLIENT_SECRET
    value: ${{ secrets.AUTH0_CLIENT_SECRET }}
    availability:
      - BUILD
      - RUNTIME

  # 5. Auth0 Secret
  - variable: AUTH0_SECRET
    value: ${{ secrets.AUTH0_SECRET }}
    availability:
      - BUILD
      - RUNTIME

  # 6. Auth0 Base URL
  - variable: APP_BASE_URL
    value: ${{ secrets.APP_BASE_URL }}
    availability:
      - BUILD
      - RUNTIME

  # 7. Auth0 Scope
  - variable: AUTH0_SCOPE
    value: ${{ secrets.AUTH0_SCOPE }}
    availability:
      - BUILD
      - RUNTIME

  # 8. Auth0 Audience
  - variable: AUTH0_AUDIENCE
    value: ${{ secrets.AUTH0_AUDIENCE }}
    availability:
      - BUILD
      - RUNTIME
